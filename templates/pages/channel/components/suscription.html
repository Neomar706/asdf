{% if user.is_authenticated %}
    {% if not is_suscriber %}
    <form action="{% url 'channel:toggle-suscriber' user=channel.user.username %}" method="POST">
        {% csrf_token %}
        <input type="hidden" name="path" value="{{ request.path }}">
        <button class='bg-white text-gray-800 hover:bg-opacity-90 px-3.5 py-1.5 rounded-full mr-2'>
            Suscribirse
        </button>
    </form>
    {% else %}
    <div x-data="{
        open: false,
        activeBtn: 1,
        activeClass: 'flex px-4 py-2 w-full bg-cgray-600 hover:bg-[#5D5D5D]',
        inactiveClass: 'flex px-4 py-2 w-full hover:bg-cgray-600'
    }" class='relative'>
        <button @click='open = true' class='bg-cgray-800 hover:bg-cgray-600 px-2 py-1.5 rounded-full flex'>
            <span class='w-6 h-6 mr-2'>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px);"><defs><clipPath id="__lottie_element_268"><rect width="96" height="96" x="0" y="0"></rect></clipPath></defs><g clip-path="url(#__lottie_element_268)"><g transform="matrix(1,0,0,1,48,48)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"></g><g opacity="1" transform="matrix(1,0,0,1,0,0)">
                    <path fill="white" fill-opacity="0.9999999994666564" d=" M-6.5,26.410999298095703 C-6.5,26.410999298095703 6.5,26.410999298095703 6.5,26.410999298095703 C6.5,29.923999786376953 3.575000047683716,32.79899978637695 0,32.79899978637695 C-3.575000047683716,32.79899978637695 -6.5,29.923999786376953 -6.5,26.410999298095703z M22.75,19.290000915527344 C22.75,19.290000915527344 16.25,13.28600025177002 16.25,13.28600025177002 C16.25,13.28600025177002 16.25,-4.184000015258789 16.25,-4.184000015258789 C16.25,-12.071999549865723 12.381999969482422,-18.107999801635742 6.077000141143799,-20.47100067138672 C1.9819999933242798,-22.163999557495117 -2.502000093460083,-22.06800079345703 -6.4019999504089355,-20.375 C-12.51200008392334,-17.947999954223633 -16.25,-11.944000244140625 -16.25,-4.184000015258789 C-16.25,-4.184000015258789 -16.25,13.28600025177002 -16.25,13.28600025177002 C-16.25,13.28600025177002 -22.75,19.290000915527344 -22.75,19.290000915527344 C-22.75,19.290000915527344 -22.75,20.02400016784668 -22.75,20.02400016784668 C-22.75,20.02400016784668 22.75,20.02400016784668 22.75,20.02400016784668 C22.75,20.02400016784668 22.75,19.290000915527344 22.75,19.290000915527344z M26,17.947999954223633 C26,17.947999954223633 26,23.218000411987305 26,23.218000411987305 C26,23.218000411987305 -26,23.218000411987305 -26,23.218000411987305 C-26,23.218000411987305 -26,17.947999954223633 -26,17.947999954223633 C-26,17.947999954223633 -19.5,11.944000244140625 -19.5,11.944000244140625 C-19.5,11.944000244140625 -19.5,-4.502999782562256 -19.5,-4.502999782562256 C-19.5,-13.829000473022461 -14.430000305175781,-21.173999786376953 -6.5,-23.60099983215332 C-6.5,-23.60099983215332 -6.5,-24.81399917602539 -6.5,-24.81399917602539 C-6.5,-29.349000930786133 -1.6579999923706055,-32.79800033569336 3.2170000076293945,-30.434999465942383 C5.329999923706055,-29.413000106811523 6.5,-27.145000457763672 6.5,-24.81399917602539 C6.5,-24.81399917602539 6.5,-23.569000244140625 6.5,-23.569000244140625 C14.430000305175781,-21.173999786376953 19.5,-13.795999526977539 19.5,-4.4710001945495605 C19.5,-4.4710001945495605 19.5,11.97599983215332 19.5,11.97599983215332 C19.5,11.97599983215332 26,17.947999954223633 26,17.947999954223633z"></path><path fill="rgb(255,255,255)" fill-opacity="1" d=" M-6.5,26.410999298095703 C-6.5,26.410999298095703 6.5,26.410999298095703 6.5,26.410999298095703 C6.5,29.923999786376953 3.575000047683716,32.79899978637695 0,32.79899978637695 C-3.575000047683716,32.79899978637695 -6.5,29.923999786376953 -6.5,26.410999298095703z M22.75,19.290000915527344 C22.75,19.290000915527344 16.25,13.28600025177002 16.25,13.28600025177002 C16.25,13.28600025177002 16.25,-4.184000015258789 16.25,-4.184000015258789 C16.25,-12.071999549865723 12.381999969482422,-18.107999801635742 6.077000141143799,-20.47100067138672 C1.9819999933242798,-22.163999557495117 -2.502000093460083,-22.06800079345703 -6.4019999504089355,-20.375 C-12.51200008392334,-17.947999954223633 -16.25,-11.944000244140625 -16.25,-4.184000015258789 C-16.25,-4.184000015258789 -16.25,13.28600025177002 -16.25,13.28600025177002 C-16.25,13.28600025177002 -22.75,19.290000915527344 -22.75,19.290000915527344 C-22.75,19.290000915527344 -22.75,20.02400016784668 -22.75,20.02400016784668 C-22.75,20.02400016784668 22.75,20.02400016784668 22.75,20.02400016784668 C22.75,20.02400016784668 22.75,19.290000915527344 22.75,19.290000915527344z M26,17.947999954223633 C26,17.947999954223633 26,23.218000411987305 26,23.218000411987305 C26,23.218000411987305 -26,23.218000411987305 -26,23.218000411987305 C-26,23.218000411987305 -26,17.947999954223633 -26,17.947999954223633 C-26,17.947999954223633 -19.5,11.944000244140625 -19.5,11.944000244140625 C-19.5,11.944000244140625 -19.5,-4.502999782562256 -19.5,-4.502999782562256 C-19.5,-13.829000473022461 -14.430000305175781,-21.173999786376953 -6.5,-23.60099983215332 C-6.5,-23.60099983215332 -6.5,-24.81399917602539 -6.5,-24.81399917602539 C-6.5,-29.349000930786133 -1.6579999923706055,-32.79800033569336 3.2170000076293945,-30.434999465942383 C5.329999923706055,-29.413000106811523 6.5,-27.145000457763672 6.5,-24.81399917602539 C6.5,-24.81399917602539 6.5,-23.569000244140625 6.5,-23.569000244140625 C14.430000305175781,-21.173999786376953 19.5,-13.795999526977539 19.5,-4.4710001945495605 C19.5,-4.4710001945495605 19.5,11.97599983215332 19.5,11.97599983215332 C19.5,11.97599983215332 26,17.947999954223633 26,17.947999954223633z"></path></g></g></g>
                </svg>
            </span>
            Suscrito
            <span class='w-6 h-6 ml-2'>
                <svg height="24" viewBox="0 0 24 24" width="24" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%;">
                    <path fill='white' d="m18 9.28-6.35 6.35-6.37-6.35.72-.71 5.64 5.65 5.65-5.65z"></path>
                </svg>
            </span>
        </button>
        <div x-show='open' @click.away='open = false' class='absolute top-9 right-0 w-max bg-cgray-800 rounded-lg py-2 z-10'>
            <a href='#' :class='activeBtn == 0 ? activeClass : inactiveClass'>
                <span class='w-6 h-6'>
                    <svg enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%;">
                        <path fill='white' d="M21.5 9h-2v-.19c0-1.91-1.11-3.62-2.9-4.48l.87-1.8c2.49 1.19 4.03 3.6 4.03 6.28V9zm-17-.19c0-1.91 1.11-3.62 2.9-4.48l-.87-1.8C4.04 3.72 2.5 6.13 2.5 8.81V9h2v-.19zM12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm8-4.65V19H4v-1.65l2-1.88v-5.15C6 7.4 7.56 5.1 10 4.34v-.38c0-1.42 1.49-2.5 2.99-1.76.65.32 1.01 1.03 1.01 1.76v.39c2.44.75 4 3.06 4 5.98v5.15l2 1.87z"></path>
                    </svg>
                </span>
                <p class='ml-4'>Todas</p>
            </a>
            <a href='#' :class='activeBtn == 1 ? activeClass : inactiveClass'>
                <span class='w-6 h-6'>
                    <svg enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%;">
                        <path fill='white' d="M10 20h4c0 1.1-.9 2-2 2s-2-.9-2-2zm10-2.65V19H4v-1.65l2-1.88v-5.15C6 7.4 7.56 5.1 10 4.34v-.38c0-1.42 1.49-2.5 2.99-1.76.65.32 1.01 1.03 1.01 1.76v.39c2.44.75 4 3.06 4 5.98v5.15l2 1.87zm-1 .42-2-1.88v-5.47c0-2.47-1.19-4.36-3.13-5.1-1.26-.53-2.64-.5-3.84.03C8.15 6.11 7 7.99 7 10.42v5.47l-2 1.88V18h14v-.23z"></path>
                    </svg>
                </span>
                <p class='ml-4'>Personalizadas</p>
            </a>
            <a href='#' :class='activeBtn == 2 ? activeClass : inactiveClass'>
                <span class='w-6 h-6'>
                    <svg enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%;">
                        <path fill='white' d="m3.85 3.15-.7.7 3.48 3.48C6.22 8.21 6 9.22 6 10.32v5.15l-2 1.88V19h14.29l1.85 1.85.71-.71-17-16.99zM5 18v-.23l2-1.88v-5.47c0-.85.15-1.62.41-2.3L17.29 18H5zm5 2h4c0 1.1-.9 2-2 2s-2-.9-2-2zM9.28 5.75l-.7-.7c.43-.29.9-.54 1.42-.7v-.39c0-1.42 1.49-2.5 2.99-1.76.65.32 1.01 1.03 1.01 1.76v.39c2.44.75 4 3.06 4 5.98v4.14l-1-1v-3.05c0-2.47-1.19-4.36-3.13-5.1-1.26-.53-2.64-.5-3.84.03-.27.11-.51.24-.75.4z"></path>
                    </svg>
                </span>
                <p class='ml-4'>Ninguna</p>
            </a>
            <form action="{% url 'channel:toggle-suscriber' user=channel.user.username %}" method="POST">
                {% csrf_token %}
                <input type="hidden" name="path" value="{{ request.path }}">
                <button :class='activeBtn == 3 ? activeClass : inactiveClass'>
                    <span class='w-6 h-6'>
                        <svg height="24" viewBox="0 0 24 24" width="24" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%;">
                            <path fill='white' d="M13.72 11.93C15.58 11.59 17 9.96 17 8c0-2.21-1.79-4-4-4S9 5.79 9 8c0 1.96 1.42 3.59 3.28 3.93C6.77 12.21 4 15.76 4 20h18c0-4.24-2.77-7.79-8.28-8.07zM10 8c0-1.65 1.35-3 3-3s3 1.35 3 3-1.35 3-3 3-3-1.35-3-3zm3 4.9c5.33 0 7.56 2.99 7.94 6.1H5.06c.38-3.11 2.61-6.1 7.94-6.1zM7 12H2v-1h5v1z"></path>
                        </svg>
                    </span>
                    <p class='ml-4'>Anular</p>
                </button>
            </form>
        </div>
    </div>
    {% endif %}
{% else %}
<div x-data="{
    open: false,
}" class='relative'>
    <button @click='open = true' class='bg-white text-gray-800 hover:bg-opacity-90 px-3.5 py-1.5 rounded-full mr-2'>
        Suscribirse
    </button>
    <div x-show='open' @click.away='open = false' class='absolute top-9 right-0 w-80 bg-cgray-800 rounded-md p-4'>
        <span class='block text-lg font-normal'>
            ¿Deseas suscribirte a este canal?
        </span>
        <span class='block font-normal text-white/50 mt-4'>
            Accede para suscribirte al canal.
        </span>
        <div class='mt-10'>
            <form action="{% url 'google_login' %}" method='POST'>
                {% csrf_token %}
                <button class='flex items-center px-3 py-1 border border-blue-400 rounded-full hover:bg-blue-400/30'>
                    <span class='text-blue-400 text-sm font-semibold mb-0.5'>Acceder</span>
                </button>
            </form>
        </div>
    </div>
</div>
{% endif %}